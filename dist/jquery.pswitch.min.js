/* (c) 2014 payworks GmbH */ 
!function(a){a.fn.pswitch=function(b){function c(a,b,c,d){var e=.3*a+.59*b+.11*c;return a=Math.floor(e*d+a*(1-d)),b=Math.floor(e*d+b*(1-d)),c=Math.floor(e*d+c*(1-d)),[a,b,c]}function d(a,b,c){return"rgb("+a+", "+b+", "+c+")"}function e(a,b){rgb1=c(30,87,153,b),rgb2=c(125,185,232,b),rgb1=d(rgb1[0],rgb1[1],rgb1[2]),rgb2=d(rgb2[0],rgb2[1],rgb2[2]),a.css("background",f(rgb1,rgb2))}function f(a,b){return"linear-gradient(to bottom, "+a+" 0%, "+b+" 100%)"}function g(a){pos=a.pageX-11,l=pos-o,1>=l&&(l=1),l>=29&&(l=29),ratio=l/28,e(n.parent(),ratio),n.css("left",l+"px")}function h(a){a.prop("checked",!0),e(a.parent().find(".pswitch-background"),0),a.parent().find(".pswitch-handle").css("left","1px")}function i(a){a.removeAttr("checked"),e(a.parent().find(".pswitch-background"),1),a.parent().find(".pswitch-handle").css("left","29px")}function j(a){a.prop("checked")?i(a):h(a)}function k(a){a.prop("checked")?h(a):i(a)}{var l,m,n,o;a.extend({},b)}return a(document).mousemove(function(a){m&&g(a)}),a(document).mouseup(function(b){m&&(checkbox=n.parent().parent().find("input[type=checkbox]"),b.pageX-11-o<14.5?h(checkbox):i(checkbox)),m=!1,a("body").css("user-select","")}),this.filter("input[type=checkbox]").each(function(){datachecked=a(this).attr("data-checked"),dataunchecked=a(this).attr("data-unchecked"),a(this).wrap("<div class='pswitch-wrapper'></div>").hide(),a(this).before("<div class='pswitch-on'>"+datachecked+"</div>").before("<div class='pswitch-background'><div class='pswitch-handle'></div></div>").before("<div class='pswitch-off'>"+dataunchecked+"</div>"),a(this).parent().find(".pswitch-on").click(function(){h(a(this).parent().find("input[type=checkbox]"))}),a(this).parent().find(".pswitch-off").click(function(){i(a(this).parent().find("input[type=checkbox]"))}),a(this).parent().find(".pswitch-handle").mousedown(function(b){n=a(this),m=!0,o=a(this).parent().offset().left,a("body").css("user-select","none"),g(b)}),a(this).parent().find(".pswitch-background").click(function(b){b.target==a(this)[0]&&j(a(this).parent().find("input[type=checkbox]"))}),a(this).on("check",function(){h(a(this))}),a(this).on("uncheck",function(){i(a(this))}),k(a(this))})}}(jQuery);